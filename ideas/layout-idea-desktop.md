# desktop.tsx

```tsx
"use client" import { useState, useEffect } from "react" import { motion } from "framer-motion" import { Timer, Trophy, RotateCcw, Home, ChevronUp, ChevronDown } from "lucide-react" import { Card } from "@/components/ui/card" import { Button } from "@/components/ui/button" import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select" import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs" // Color palette for the tiles const colors = ["bg-red-500", "bg-blue-500", "bg-yellow-400", "bg-green-500", "bg-orange-500", "bg-white"] // Function to generate a random game board const generateRandomBoard = () => { const tiles = [ ...colors.flatMap((color) => Array(4).fill(color)), "bg-transparent", // blank tile ] for (let i = tiles.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)) ;[tiles[i], tiles[j]] = [tiles[j], tiles[i]] } return tiles } // Add these helper functions at the top of the file with the other functions const getBlankPosition = (board: string[]) => { return board.findIndex((tile) => tile === "bg-transparent") } const isAdjacent = (index: number, blankIndex: number) => { const size = 5 // 5x5 grid const row = Math.floor(index / size) const col = index % size const blankRow = Math.floor(blankIndex / size) const blankCol = blankIndex % size return ( // Check if tile is above, below, left, or right of blank (Math.abs(row - blankRow) === 1 && col === blankCol) || (row === blankRow && Math.abs(col - blankCol) === 1) ) } export default function ColorPuzzle() { const [score, setScore] = useState(0) const [time, setTime] = useState(0) const [gameBoard, setGameBoard] = useState(generateRandomBoard()) const [gameMode, setGameMode] = useState("set-pattern") const [isLeaderboardOpen, setIsLeaderboardOpen] = useState(true) // Timer effect useEffect(() => { const timer = setInterval(() => { setTime((prev) => prev + 1) }, 1000) return () => clearInterval(timer) }, []) const handleNewGame = () => { setGameBoard(generateRandomBoard()) setScore(0) setTime(0) setIsLeaderboardOpen(true) //Added to reset leaderboard visibility } const formatTime = (seconds: number) => { const mins = Math.floor(seconds / 60) const secs = seconds % 60 return `${mins}:${secs.toString().padStart(2, "0")}` } // Mock leaderboard data const leaderboard = [ { name: "Alice", score: 1000, time: "1:30" }, { name: "Bob", score: 950, time: "1:45" }, { name: "Charlie", score: 900, time: "2:00" }, { name: "David", score: 850, time: "2:15" }, { name: "Eve", score: 800, time: "2:30" }, ] return ( <div className="min-h-screen bg-gradient-to-b from-slate-900 to-slate-800 p-4 lg:p-8 flex flex-col lg:flex-row items-start"> {/* Side Panel */} <div className="w-full lg:w-80 mb-8 lg:mb-0 lg:mr-8"> <Card className="bg-slate-800/50 backdrop-blur-sm border-slate-700 p-6"> <div className="flex flex-col gap-6"> <div className="flex justify-between items-center"> <h2 className="text-2xl font-bold text-slate-200">Color Puzzle</h2> <Button variant="ghost" size="icon" onClick={() => (window.location.href = "/")}> <Home className="h-5 w-5" /> </Button> </div> <div className="flex justify-between items-center"> <div className="flex items-center gap-2 text-yellow-400"> <Trophy className="h-5 w-5" /> <span className="text-xl font-bold">{score}</span> </div> <div className="flex items-center gap-2 text-slate-200"> <Timer className="h-5 w-5" /> <span className="text-xl font-mono">{formatTime(time)}</span> </div> </div> <Select value={gameMode} onValueChange={setGameMode}> <SelectTrigger className="w-full bg-slate-700 border-slate-600"> <SelectValue placeholder="Game Mode" /> </SelectTrigger> <SelectContent className="bg-slate-800 border-slate-700"> <SelectItem value="random-pattern">Random Pattern</SelectItem> <SelectItem value="set-pattern">Set Pattern</SelectItem> </SelectContent> </Select> <Button variant="default" className="w-full bg-blue-600 hover:bg-blue-700" onClick={handleNewGame}> <RotateCcw className="mr-2 h-4 w-4" /> New Game </Button> {/* Target Pattern */} <div> <h3 className="text-lg font-semibold text-slate-200 mb-2">Target Pattern</h3> <div className="grid grid-cols-5 gap-1 bg-slate-700 p-2 rounded-lg"> {Array(25) .fill(null) .map((_, i) => ( <div key={i} className={`aspect-square rounded-sm ${i === 12 ? "bg-transparent" : colors[Math.floor(i / 4)]}`} /> ))} </div> </div> </div> </Card> </div> {/* Main Game Area */} <div className="flex-grow"> <Card className="bg-slate-800/50 backdrop-blur-sm border-slate-700 p-6"> <div className="grid grid-cols-5 gap-4"> {gameBoard.map((color, i) => { const blankPosition = getBlankPosition(gameBoard) const isAdjacentToBlank = isAdjacent(i, blankPosition) return ( <motion.button key={i} className={`aspect-square rounded-lg ${color} ${ color === "bg-transparent" ? "border-2 border-dashed border-slate-600" : "" } shadow-lg ${isAdjacentToBlank && color !== "bg-transparent" ? "cursor-pointer" : "cursor-default"}`} whileHover={isAdjacentToBlank ? { scale: 1.05 } : {}} whileTap={isAdjacentToBlank ? { scale: 0.95 } : {}} transition={isAdjacentToBlank ? { type: "spring", stiffness: 400, damping: 17 } : {}} onClick={() => { if (isAdjacentToBlank) { const newBoard = [...gameBoard] ;[newBoard[i], newBoard[blankPosition]] = [newBoard[blankPosition], newBoard[i]] setGameBoard(newBoard) } }} /> ) })} </div> </Card> </div> {/* Leaderboard */} <div className="w-full lg:w-80 mt-8 lg:mt-0 lg:ml-8"> <Card className="bg-slate-800/50 backdrop-blur-sm border-slate-700"> <div className="p-4 flex justify-between items-center"> <h3 className="text-xl font-bold text-slate-200">Leaderboard</h3> <Button variant="ghost" size="sm" onClick={() => setIsLeaderboardOpen(!isLeaderboardOpen)}> {isLeaderboardOpen ? <ChevronUp className="h-4 w-4" /> : <ChevronDown className="h-4 w-4" />} </Button> </div> {isLeaderboardOpen && ( <div className="px-4 pb-4"> <Tabs defaultValue="score"> <TabsList className="w-full bg-slate-700"> <TabsTrigger value="score" className="w-1/2"> By Score </TabsTrigger> <TabsTrigger value="time" className="w-1/2"> By Time </TabsTrigger> </TabsList> <TabsContent value="score"> <ul className="space-y-2"> {leaderboard.map((entry, index) => ( <li key={index} className="flex justify-between items-center text-slate-200"> <span>{entry.name}</span> <span>{entry.score}</span> </li> ))} </ul> </TabsContent> <TabsContent value="time"> <ul className="space-y-2"> {leaderboard.map((entry, index) => ( <li key={index} className="flex justify-between items-center text-slate-200"> <span>{entry.name}</span> <span>{entry.time}</span> </li> ))} </ul> </TabsContent> </Tabs> </div> )} </Card> </div> </div> ) }
```

